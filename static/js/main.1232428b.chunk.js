(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(88)},37:function(e,t,a){},38:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),l=a.n(i),o=(a(37),a(13)),c=a(14),s=a(18),u=a(15),d=a(19),m=a(10),h=(a(25),a(26),a(38),a(6)),p=a(91),v=a(92),f=a(9),b=a.n(f),E=a(16),g=a(29),w=(a(86),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=(new Date(e)-t)/1e3/60;return Math.round(a)}),S=function(){var e=Object(E.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getJSON("https://api.tfl.gov.uk/StopPoint/Search/".concat(t));case 2:return a=e.sent,n=a.matches[0].id,e.next=6,m.getJSON("https://api.tfl.gov.uk/StopPoint/".concat(n,"/Arrivals"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var o=i.value,c=o.destinationName,s=o.lineName,u=o.expectedArrival,d=w(u),m=void 0;m=0===(d=d>-1?d:0)?"Due":"".concat(d," min").concat(1===d?"":"s"),t.push({destination:c,routeNumber:s,timeUntilArrival:d,timeUntilArrivalString:m})}}catch(h){n=!0,r=h}finally{try{a||null==l.return||l.return()}finally{if(n)throw r}}return t.sort(function(e,t){return e.timeUntilArrival-t.timeUntilArrival})},y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(g.a)({},e.target.id,e.target.value))},a.handleSubmit=Object(E.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({arrivals:[],isLoading:!0}),e.next=3,S(a.state.stopCode);case 3:t=e.sent,n=C(t),a.setState({arrivals:n,isLoading:!1});case 6:case"end":return e.stop()}},e)})),a.validateStopCode=function(){return new RegExp("^[0-9]{5}$").test(a.state.stopCode)},a.state={stopCode:"",isLoading:!1,userHasSubmitted:!1,arrivals:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement(h.TextInput,{label:"Bus Stop Code",className:"no-helper",id:"stopCode",onChange:this.handleChange,value:this.state.stopCode}),r.a.createElement(h.Button,{waves:"light",className:"red darken-3",onClick:this.handleSubmit,disabled:!this.validateStopCode(),type:"number"},"Submit ",r.a.createElement(h.Icon,{right:!0},"send")),this.state.isLoading&&r.a.createElement(h.Row,{className:"center-align"},r.a.createElement(h.Preloader,{color:"red"})),this.state.arrivals.length>0&&r.a.createElement(h.Table,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{"data-field":"route"},"Route"),r.a.createElement("th",{"data-field":"destination"},"Destination"),r.a.createElement("th",{"data-field":"time"},"Time"))),r.a.createElement("tbody",null,this.state.arrivals.map(function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.routeNumber),r.a.createElement("td",null,e.destination),r.a.createElement("td",null,e.timeUntilArrivalString))}))))}}]),t}(n.Component),O=function(){return r.a.createElement(p.a,null,r.a.createElement(v.a,{path:"/",exact:!0,component:y}))},j=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App app-container"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper red darken-3"},r.a.createElement(h.Container,null,r.a.createElement("a",{href:"/",className:"breadcrumb"},"Where's My Bloody Bus!?")))),r.a.createElement(h.Container,null,r.a.createElement(O,null)))}}]),t}(n.Component),k=a(90);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(k.a,{basename:"/WMBB"},r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.1232428b.chunk.js.map